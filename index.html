<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crimson Shinobi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="theme-color" content="#000000">
    <style>
      html, body, #root {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden; /* Prevent scrolling on the body */
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      }
      .blood-text-shadow {
        text-shadow: 0 0 8px #f00, 0 0 12px #c00, 0 0 16px #a00;
      }
      .scarf {
        animation: scarf-flow 2s ease-in-out infinite;
      }
      @keyframes scarf-flow {
        0%, 100% { transform: scaleY(1) rotate(2deg); }
        50% { transform: scaleY(1.1) rotate(-2deg); }
      }
      .attack-slash {
        animation: slash 0.2s ease-out forwards;
      }
      @keyframes slash {
        0% { transform: scale(0) rotate(-45deg); opacity: 0.7; }
        70% { transform: scale(1.5) rotate(0deg); opacity: 1; }
        100% { transform: scale(1.8) rotate(15deg); opacity: 0; }
      }
      .enemy-glow {
        box-shadow: 0 0 5px #ef4444, 0 0 10px #ef4444;
      }
      @keyframes player-invincible-blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.4; }
      }
      .player-invincible {
        animation: player-invincible-blink 0.2s linear infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .shuriken-spin {
        animation: spin 0.3s linear infinite;
      }
      .spinning-blade {
        animation: spin 0.2s linear infinite;
      }

      /* Enemy Ninja Animations */
      @keyframes ninja-idle-bob {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-3px); }
      }
      @keyframes sash-pulse {
        0%, 100% { box-shadow: 0 0 5px #ef4444, 0 0 10px #ef4444; }
        50% { box-shadow: 0 0 10px #f00, 0 0 20px #c00; }
      }
      .ninja-idle .ninja-body {
        animation: ninja-idle-bob 1.5s ease-in-out infinite;
      }
      .ninja-idle .ninja-sash-glow {
        animation: sash-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes ninja-run-bob {
        0%, 100% { transform: translateY(0) rotate(-2deg); }
        50% { transform: translateY(-4px) rotate(2deg); }
      }
      .ninja-run .ninja-body {
        animation: ninja-run-bob 0.4s ease-in-out infinite;
      }

      @keyframes ninja-attack-lunge {
        0% { transform: translateX(0) scaleY(1); }
        50% { transform: translateX(15px) scaleY(0.9) rotate(-5deg); }
        100% { transform: translateX(0) scaleY(1); }
      }
      .ninja-attack .ninja-body {
         animation: ninja-attack-lunge 0.3s ease-out forwards;
      }
      .ninja-attack .ninja-sash-glow {
        transform: scale(1.3);
        box-shadow: 0 0 15px #f00, 0 0 25px #c00;
      }
      
      /* Player Character Animations */
      @keyframes player-walk-legs {
        0%, 100% { transform: rotate(-20deg); }
        50% { transform: rotate(20deg); }
      }

      .player-idle .ninja-body {
        animation: ninja-idle-bob 1.5s ease-in-out infinite;
      }
      .player-idle .ninja-sash-glow {
        animation: sash-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      .player-run .ninja-body {
        animation: ninja-run-bob 0.4s ease-in-out infinite;
      }
      .player-run .leg-left {
        animation: player-walk-legs 0.4s ease-in-out infinite;
        transform-origin: top center;
      }
      .player-run .leg-right {
        animation: player-walk-legs 0.4s ease-in-out infinite reverse;
        transform-origin: top center;
      }
      
      .player-jump .leg {
        transform-origin: top center;
        transition: transform 0.2s ease-out;
      }
       .player-jump .ninja-body {
        transition: transform 0.2s ease-out;
      }

      /* Jump Ascent */
      .player-jump-up .ninja-body {
        transform: translateY(-3px) scaleY(0.95);
      }
      .player-jump-up .leg-left {
        transform: rotate(40deg) scale(0.9);
      }
      .player-jump-up .leg-right {
        transform: rotate(10deg) scale(0.9);
      }

      /* Jump Descent / Fall */
      .player-jump-down .ninja-body {
        transform: scaleY(1.05);
      }
      .player-jump-down .leg-left {
        transform: rotate(-20deg);
      }
      .player-jump-down .leg-right {
        transform: rotate(20deg);
      }
      .ios-backdrop-blur {
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
      }
      @keyframes player-teleport {
        0% { opacity: 0.3; transform: scaleX(0.5) scaleY(1.2); }
        50% { opacity: 1; transform: scaleX(1.2) scaleY(0.8); }
        100% { opacity: 1; transform: scale(1); }
      }
      .player-teleporting {
        animation: player-teleport 0.2s ease-out forwards;
      }

      /* --- Biome Backgrounds --- */
      @keyframes animated-gradient {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }
      .biome-default {
        background-color: #1a202c;
      }
      .biome-fire {
        background: linear-gradient(to bottom, #4a0404, #000000);
      }
      .biome-ice {
        background: linear-gradient(to bottom, #0c2a4c, #000000);
      }
      .biome-forest {
        background: linear-gradient(to bottom, #044a0c, #000000);
      }
      .biome-sky {
        background: linear-gradient(to bottom, #2c5282, #6b46c1);
      }

      /* --- NEW BIOMES --- */
      .biome-sunken_temple {
        background: linear-gradient(45deg, #022c43, #053f5e, #115173, #053f5e);
        background-size: 400% 400%;
        animation: animated-gradient 15s ease infinite;
      }
      .biome-crystal_caverns {
        background: linear-gradient(-45deg, #1d0f33, #3c1e5a, #2e1548, #000000);
        background-size: 400% 400%;
        animation: animated-gradient 20s ease infinite;
      }
      .biome-volcanic_heart {
        background: linear-gradient(225deg, #ff4e00, #ff0000, #2c0404, #000000);
        background-size: 400% 400%;
        animation: animated-gradient 12s ease infinite;
      }
      .biome-haunted_battlefield {
        background: linear-gradient(to bottom, #16222A, #3A434A);
      }
      .biome-aetherium_clouds {
        background: linear-gradient(135deg, #4c1d95, #8b5cf6, #c4b5fd, #ffffff);
        background-size: 400% 400%;
        animation: animated-gradient 18s ease infinite;
      }
      .biome-mechanists_forge {
        background: linear-gradient(to right, #3E2723, #5D4037, #A1887F, #5D4037);
        background-size: 400% 400%;
        animation: animated-gradient 25s ease infinite;
      }
      .biome-void_nexus {
        background-color: #000000;
        /* Consider adding a subtle particle effect here via JS canvas later */
      }

    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.0",
    "vite": "https://aistudiocdn.com/vite@^7.1.12",
    "vite-plugin-pwa": "https://aistudiocdn.com/vite-plugin-pwa@^1.1.0",
    "@capacitor/cli": "https://aistudiocdn.com/@capacitor/cli@^7.4.4",
    "@supabase/supabase-js": "https://aistudiocdn.com/@supabase/supabase-js@^2.76.1"
  }
}
</script>
</head>
  <body class="bg-black">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>